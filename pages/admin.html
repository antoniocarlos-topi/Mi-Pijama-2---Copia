<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Admin - MI Pijamas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../assets/css/styles.css" />
</head>

<body>

<header class="site-header">
  <div class="container header-row">
    <a class="brand" href="../index.html" aria-label="MI Pijamas - Início">
      <span class="brand-dot"></span>
      <span class="brand-name">MI Pijamas</span>
    </a>

    <button
      class="menu-toggle"
      type="button"
      aria-label="Abrir menu"
      aria-expanded="false"
      aria-controls="mobile-menu"
    >
      <span></span><span></span><span></span>
    </button>

    <nav class="site-nav desktop-nav" aria-label="Navegação principal">
      <ul>
        <li><a href="../index.html">Início</a></li>
        <li><a href="produtos.html">Pijamas</a></li>
        <li><a href="admin.html">Admin</a></li>
        <li>
          <a class="nav-cart" href="carrinho.html">
            Carrinho <span class="cart-badge" data-cart-badge aria-label="Itens no carrinho">0</span>
          </a>
        </li>
      </ul>
    </nav>
  </div>

  <!-- Overlay -->
  <div class="menu-overlay" data-menu-close></div>

  <!-- Drawer -->
  <aside class="mobile-menu" id="mobile-menu" aria-hidden="true">
    <div class="mobile-menu-header">
      <span class="mobile-menu-title">Menu</span>

      <button class="menu-close" type="button" aria-label="Fechar menu" data-menu-close>
        ✕
      </button>
    </div>

    <nav class="mobile-nav" aria-label="Menu mobile">
      <a href="../index.html">Início</a>
      <a href="produtos.html">Pijamas</a>
      <a href="admin.html">Admin</a>
      <a class="nav-cart" href="carrinho.html">
        Carrinho <span class="cart-badge" data-cart-badge>0</span>
      </a>
    </nav>

    <div class="mobile-menu-footer">
      <a class="btn primary" href="produtos.html">Ver Pijamas</a>
      <a class="btn" href="https://wa.me/558699700402" target="_blank" rel="noopener noreferrer">WhatsApp</a>
    </div>
  </aside>
</header>

<main>
  <div class="container" style="padding: 28px 0;">
    <h2 style="margin-bottom: 10px;">Painel Admin</h2>
    <p style="margin-bottom: 18px;">Cadastre/edite pijamas direto no Supabase.</p>

    <!-- LOGIN -->
    <section class="mini-card" id="admin-login" style="padding:18px; max-width:520px;">
      <h3 style="margin-bottom:10px;">Acesso</h3>

      <div class="form-group">
        <label for="admin-pass">Senha</label>
        <input id="admin-pass" type="password" placeholder="Digite a senha do admin" />
      </div>

      <div class="actions" style="margin-top:10px;">
        <button class="btn primary" id="admin-enter" type="button">Entrar</button>
      </div>

      <p id="admin-login-msg" style="margin-top:10px;"></p>
    </section>

    <!-- APP -->
    <section id="admin-app" style="display:none;">
      <!-- FORM -->
      <section class="mini-card" style="padding:18px; margin-top:18px;">
        <h3 id="form-title" style="margin-bottom:10px;">Novo pijama</h3>

        <form id="product-form">
          <input type="hidden" id="p-id" />

          <div class="grid-3" style="grid-template-columns:1fr; gap:14px;">
            <div class="form-group">
              <label for="p-name">Nome</label>
              <input id="p-name" required placeholder="Ex: Pijama Floral" />
            </div>

            <div class="form-group">
              <label for="p-price">Preço (ex: 89.90)</label>
              <input id="p-price" required inputmode="decimal" placeholder="89.90" />
            </div>

            <div class="form-group">
              <label for="p-stock">Estoque (número)</label>
              <input id="p-stock" inputmode="numeric" placeholder="Ex: 10" />
            </div>
          </div>

          <div class="form-group" style="margin-top:14px;">
            <label for="p-image">Imagem (opcional)</label>
            <input id="p-image" placeholder="Ex: pijama1.jpg OU https://.../imagem.jpg" />
            <p style="margin-top:6px; font-size:.9rem; opacity:.8;">
              Se você fizer upload abaixo, a URL será salva automaticamente.
            </p>
          </div>

          <div class="form-group">
            <label for="p-image-file">Imagem (upload do celular/PC)</label>
            <input id="p-image-file" type="file" accept="image/png,image/jpeg,image/jpg,image/webp" />
            <p style="margin-top:8px; font-size:.9rem; opacity:.75;">
              Ao salvar, a imagem será enviada para o Supabase e a URL será salva no produto.
            </p>
          </div>

          <div class="form-group">
            <img id="p-image-preview" alt="Prévia da imagem"
                 style="display:none; width:100%; max-width:420px; border-radius:16px; border:1px solid rgba(46,42,43,.12);" />
          </div>

          <div class="form-group">
            <label for="p-desc">Descrição</label>
            <textarea id="p-desc" placeholder="Descrição do pijama"></textarea>
          </div>

          <div style="display:flex; gap:14px; flex-wrap:wrap; margin-top:10px;">
            <label style="display:flex; gap:10px; align-items:center;">
              <input type="checkbox" id="p-active" checked />
              Ativo (aparece no site)
            </label>

        <label style="display:flex; gap:10px; align-items:center;">
  <input type="checkbox" id="p-featured" />
  Selecionado (aparece na Home)
</label>

            <label style="display:flex; gap:10px; align-items:center;">
              <input type="checkbox" id="p-promo" />
              Promoção
            </label>

            <div class="form-group" style="min-width:220px; margin:0;">
              <label for="p-promo-price">Preço promocional</label>
              <input id="p-promo-price" inputmode="decimal" placeholder="Ex: 69.90" />
            </div>
          </div>

          <div class="actions" style="margin-top:14px;">
            <button class="btn primary" type="submit" id="save-btn">Salvar</button>
            <button class="btn" type="button" id="clear-btn">Limpar</button>
            <button class="btn" type="button" id="logout-btn">Sair</button>
          </div>

          <p id="form-msg" style="margin-top:10px;"></p>
        </form>
      </section>

      <!-- LISTA -->
      <section class="section" style="margin-top:18px;">
        <h2 style="text-align:left; margin-bottom:12px;">Pijamas cadastrados</h2>
        <div id="admin-list" class="highlights"></div>
      </section>
    </section>
  </div>
</main>

<!-- ✅ ordem correta -->
<script src="../assets/js/supabase.js"></script>
<script src="../assets/js/data.js"></script>
<script src="../assets/js/app.js"></script>
<script src="../assets/js/admin.js"></script>

</body>
</html>
